# 加密货币交易系统 - 快速启动指南

## 🚀 问题诊断

你的系统已经可以登录，但无法执行自动交易。这是因为需要完成以下配置：

1. ✅ 后端服务已运行（端口8000）
2. ✅ 数据库已初始化
3. ✅ 管理员账户已创建（admin/admin123）
4. ❌ **需要配置交易所API密钥**
5. ❌ **需要创建交易机器人**
6. ❌ **需要启动机器人**

---

## 📋 配置步骤

### 第1步：登录系统

1. 访问：http://localhost:8000/static/ultra_minimal.html
2. 输入账户：`admin`
3. 输入密码：`admin123`
4. 点击登录按钮

### 第2步：配置交易所API（必须）

#### 方式A：通过Web界面配置

1. 登录后，点击左侧菜单的「交易所配置」
2. 点击「添加交易所配置」按钮
3. 填写以下信息：
   - **交易所名称**：binance（币安）或 okx（欧易）等
   - **API Key**：你在交易所申请的API密钥
   - **API Secret**：你在交易所申请的API密钥密钥
   - **Passphrase**：某些交易所需要（如OKX）
   - **是否测试网**：如果是测试环境，勾选此项
4. 点击「测试连接」按钮，验证配置是否正确
5. 点击「保存」按钮

#### 方式B：使用脚本快速配置

如果已有API密钥，可以运行以下脚本：

```bash
python quick_setup.py
```

脚本会提示你输入交易所信息和API密钥。

### 第3步：创建交易机器人

1. 点击左侧菜单的「机器人管理」
2. 点击「创建机器人」按钮
3. 填写机器人配置：
   - **机器人名称**：例如「BTC网格机器人」
   - **交易所**：选择你刚配置的交易所
   - **交易对**：例如 BTC/USDT、ETH/USDT
   - **策略类型**：选择策略（如：对冲网格、均值回归、动量策略）
   - **策略配置**：
     - 网格层数：10-20
     - 网格间距：0.01-0.05（1%-5%）
     - 投资金额：100-1000 USDT
     - 最大仓位：1000-10000 USDT
     - 止损阈值：0.05（5%）
     - 止盈阈值：0.10（10%）
4. 点击「创建」按钮

### 第4步：启动机器人

1. 在机器人列表中，找到刚创建的机器人
2. 点击「启动」按钮
3. 确认启动后，机器人状态会变为「运行中」

### 第5步：监控机器人运行

1. 点击「机器人状态」查看实时状态
2. 点击「市场数据」查看实时行情
3. 点击「K线图表」查看价格走势
4. 点击「交易记录」查看历史交易
5. 点击「订单管理」查看当前订单

---

## 🔑 获取交易所API密钥

### 币安（Binance）

1. 登录币安官网：https://www.binance.com
2. 进入「API管理」页面
3. 点击「创建API」
4. 设置API标签名称
5. **重要**：根据需求选择权限：
   - ✅ **读取权限**（必须）
   - ✅ **交易权限**（必须，用于自动交易）
   - ❌ **提现权限**（不勾选，更安全）
6. 完成安全验证（短信、邮箱、2FA等）
7. **保存API Key和Secret**（只显示一次，请妥善保管）

### 欧易（OKX）

1. 登录OKX官网：https://www.okx.com
2. 进入「API管理」页面
3. 点击「创建API」
4. 设置API名称和标签
5. **重要**：配置权限：
   - ✅ **读取权限**
   - ✅ **交易权限**
   - ❌ **提币权限**
6. 完成安全验证
7. **保存API Key、Secret和Passphrase**（Passphrase是你设置的，请牢记）

---

## ⚙️ 策略说明

### 1. 对冲网格策略（Hedge Grid）
- **适用场景**：横盘震荡市场
- **原理**：在价格区间内设置多个网格，价格上涨卖出，下跌买入
- **优点**：震荡行情收益稳定
- **风险**：单边行情可能亏损

**推荐配置**：
- 网格层数：10-20层
- 网格间距：2%-3%
- 投资金额：1000 USDT
- 止损阈值：5%
- 止盈阈值：10%

### 2. 均值回归策略（Mean Reversion）
- **适用场景**：价格偏离均值后回归
- **原理**：价格偏离平均值时反向交易
- **优点**：适合波动较大的市场
- **风险**：趋势行情可能亏损

**推荐配置**：
- 均值周期：20
- 标准差倍数：2
- 止损阈值：3%
- 止盈阈值：5%

### 3. 动量策略（Momentum）
- **适用场景**：趋势行情
- **原理**：跟随价格趋势交易
- **优点**：趋势行情收益高
- **风险**：震荡行情容易亏损

**推荐配置**：
- 短周期：5
- 长周期：20
- 止损阈值：3%
- 止盈阈值：8%

---

## 🎯 测试建议

### 1. 先使用测试网

强烈建议先在测试网环境中测试：
- 币安测试网：https://testnet.binance.vision
- OKX测试网：https://www.okx.com/demo-trading

在「交易所配置」中勾选「是否测试网」即可。

### 2. 小资金测试

使用小额资金测试（例如10-50 USDT），确认策略有效后再增加资金。

### 3. 持续监控

启动机器人后，持续监控几天，观察：
- 网格是否正常运行
- 订单是否正常成交
- 收益是否符合预期
- 风险控制是否生效

---

## 🔍 常见问题

### Q1: 测试连接失败怎么办？
**A:** 检查以下几点：
- API Key和Secret是否正确
- API权限是否包含「读取」和「交易」
- IP白名单是否设置正确
- 是否勾选了「测试网」但使用的是正式网API

### Q2: 机器人启动后不交易？
**A:** 可能原因：
- 账户余额不足
- 交易对不支持
- 网格间距设置过大
- 价格不在网格区间内

### Q3: 如何停止机器人？
**A:** 在机器人列表中，点击「停止」按钮即可。

### Q4: 能否同时运行多个机器人？
**A:** 可以，但要注意：
- 总仓位不要超过账户余额
- 避免同一交易对使用多个策略
- 合理分配资金

### Q5: 机器人会一直运行吗？
**A:** 默认会一直运行，直到：
- 手动停止
- 触发止损/止盈
- 账户余额不足
- 系统异常

---

## 📞 技术支持

如果遇到问题，请检查：
1. 后端服务是否正常运行：`ps aux | grep uvicorn`
2. 数据库是否初始化：`python init_db.py`
3. 查看日志文件
4. 重启后端服务

---

## 🎉 完成

完成以上步骤后，你的系统就可以自动交易了！

祝你交易顺利，收益满满！🚀
